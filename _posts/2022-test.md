---
layout: post
title: "git --amendminh"
# subtitle: "This is a subtitle"
date: 2022-11-11
author: "MAI Minh"
header-img: "img/aditya-vyas-EPmJtn_lYs0-unsplash.jpg"
header-style: text
tags: [git]
catalog: true
permalink: /distilled/git---amendminh
katex: true
mathjax: true
---

### minor commit & update the contents of your last commit
```bash
git add file
git commit -va --amend
```
### Edit commit message
Lúc này sẽ có typo, nhưng may thay là bạn có thể sửa nó khá dễ trên commit messages:
```git
git commit --amend                  # start $EDITOR to edit the message
git commit --amend -m "New message" # set the new message directly
```
Nhưng đó vẫn chưa hết công dụng của `git-amend`. Nếu bạn có quên add một file vào, chỉ cần add vào và chỉnh lại commit trước đó!
```git
git add forgotten_file 
git commit --amend
```

Hãy nhớ rằng `--amend` thật ra tạo commit mới thay thế cho cái trước, nên đừng dùng nó để thay đổi commit mà đã được đẩy vào giữa repository. Có một ngoại lệ đó là bạn phải chắc chắn về việc không có developer nào đã check các bản trước và làm dựa trên đó, như thế thì một forced push (git push --force) vẫn sẽ ổn. Cần có option --force ở đây vì lịch sử của hệ thống đã bị điều chỉnh local, nghĩa là push sẽ bị reject bởi server từ xa vì fast-forward merge là không thể.

--> If publised commit code + work with others --> avoid git commit --amend
